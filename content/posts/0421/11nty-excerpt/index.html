<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>11nty Inhalt anzeigen in der Liste</title><meta name="description" content="Wie zeigen ich den ersten Satz in der Postliste an"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet"><link rel="stylesheet" href="/template/css/bulma.min.css"><link rel="stylesheet" href="/template/css/custom.css"><link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="der_kuba"><link rel="alternate" href="/feed/feed.json" type="application/json" title="der_kuba"><script>document.addEventListener("DOMContentLoaded",()=>{const e=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);e.length>0&&e.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.target,a=document.getElementById(t);e.classList.toggle("is-active"),a.classList.toggle("is-active")})})});</script></head><body><header><div class="container"><nav class="navbar is-transparent"><div class="navbar-brand"><a class="navbar-item navbar-brand__title" href="/">der_kuba </a><a class="navbar-item" href="https://github.com/derKuba">@Github </a><a class="navbar-item" href="https://twitter.com/der_kuba">@Twitter</a><div class="navbar-burger" data-target="navigation-items"><span></span> <span></span> <span></span></div></div><div id="navigation-items" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="/">Home </a><a class="navbar-item" href="/posts/">Archive </a><a class="navbar-item" href="/content/about/">About Me </a><a class="navbar-item" href="/content/impressum.html">Impressum </a><a class="navbar-item" href="/content/datenschutz.html">Datenschutzerklärung</a></div></div></nav></div></header><section class="section"><div class="container"><div class="columns is-centered"><div class="column is-8"><h1 class="title is-3">11nty Inhalt anzeigen in der Liste</h1><div class="post-detail__tags"><h3 class="subtitle is-6"><time datetime="2021-04-04">04 Apr 2021</time></h3><div class="tags"><a href="/tags/11nty/" class="post-tag"><span class="tag is-black">11nty </span></a><a href="/tags/excerpt/" class="post-tag"><span class="tag is-primary">Excerpt</span></a></div></div><div class="content post_detail__content"><p>Wer in der Liste aller Posts zusätzlich den Inhalt anzeigen möchte, hat out-of-the-box nur die Möglichkeit den gesamten Inhalt anzuzeigen. Wenn man z.B. nur den ersten Satz eines Posts anzeigen möchte, muss dies dem Javascript von Eleventy noch beibringen.</p><p>Als Grundlage wird der <a href="https://github.com/11ty/eleventy-base-blog">11nty-Starter-Blog</a> verwendet.</p><p>Wenn man diesen startet, erhält man folgendes Bild. Es zeigt die Post-Liste mit Titel, Datum und Tags, aber ohne Auszug des Inhalts.<br><img src="/content/img/0421/excerpt-place.png" alt="11nty starter" title="11nty starter"></p><div class="has-text-right image-subline">Bild 1: Post-Liste im Starter Template</div><p>Die rote Schrift zeigt den Ort an, an dem der Inhalt eingefügt werden soll.<br>Für die Umsetzung habe ich mich an folgenden Seiten orientiert:</p><p><a href="https://github.com/muenzpraeger/eleventy-chirpy-blog-template">https://github.com/muenzpraeger/eleventy-chirpy-blog-template</a> und<br><a href="https://keepinguptodate.com/pages/2019/06/creating-blog-with-eleventy/">https://keepinguptodate.com/pages/2019/06/creating-blog-with-eleventy/</a> .</p><p>Die Datei <strong>.eleventy.js</strong> benötigt folgende Funktion:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">extractExcerpt</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>post<span class="token punctuation">,</span> <span class="token string">"templateContent"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">const</span> content <span class="token operator">=</span> post<span class="token punctuation">.</span>templateContent<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> markerIndex <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&lt;!-- endOfPreview -->"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <br>  <span class="token keyword">return</span> markerIndex <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> content<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> markerIndex<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"..."</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Zunächst wird geprüft ob das Post-Object das Feld &quot;templateContent&quot; besitzt. Dies sollte von Eleventy bereitgestellt werden. Anschließend wird es in der Content-Variable gecached. Der Inhalt wird zerschnitten vom Anfang bis zum Schnippsel <strong>&quot;&quot;</strong>. Hier kann natürlich jedes beliebiges, aber möglichst vom Inhalt abhebendes Tag verwendet werden. Das ist ein Marker, der das Ende der Auszuges, bzw. der Vorschau, beschreibt. Wenn kein Marker gefunden wird, wird ein leerer String zurückgegeben.</p><p>Nun muss Eleventy beigebracht werden, diese Funktion zu werden. Es wäre z.B. als Filter möglich, aber ein &quot;Shortcut&quot; erscheint für mich praktischer. Ein Shortcut sieht aus wie folgt:</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// remove whitespace between {} and %</span><br><span class="token punctuation">{</span> <span class="token operator">%</span> excerpt pageObject <span class="token operator">%</span> <span class="token punctuation">}</span></code></pre><p><em>Bitte die Leerzeichen entfernen zwischen den runden Klammern und dem Prozentzeichen. Leider rendert 11nty den Ausschnitt ohne Leerzeichen!</em></p><pre class="language-javascript"><code class="language-javascript">eleventyConfig<span class="token punctuation">.</span><span class="token function">addShortcode</span><span class="token punctuation">(</span><span class="token string">"excerpt"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span><br>    <span class="token function">extractExcerpt</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Das Eleventy-Config-Object nun ein neues Schlagwort &quot;excerpt&quot; (Auszug) und übergibt als Parameter wie im vorherigen Code-Snippet angezeigt das Postobjekt.</p><p>Wenn man diesen Shortcut nun in der Datei <em>/_include/postlist.njk</em> innerhalb der Listen-Tags (&lt; li &gt; &lt;/ li &gt;) einfügt, erhält man seinen gewünschten Inhaltsauszug.</p><pre class="language-javascript"><code class="language-javascript"> <span class="token punctuation">{</span> <span class="token operator">%</span> excerpt post <span class="token operator">%</span> <span class="token punctuation">}</span></code></pre><p>Dieser Marker kann jetzt in den Markdown-Dateien der Blogposts verwendet werden(<strong>/posts/*.md</strong>). Einfach nach gewünschter Länge des Auszuges das <strong>&lt; !-- endOfPreview -- &gt;</strong> einfügen.</p><pre class="language-html"><code class="language-html">Leverage agile frameworks to provide a robust <span class="token comment">&lt;!-- endOfPreview --></span><br>synopsis for high level overviews. Iterative </code></pre><p><img src="/content/img/0421/excerpt-final.png" alt="11nty starter" title="11nty starter"><br><img src="/content/img/0421/excerpt-place.png" alt="11nty starter" title="11nty starter"></p><div class="has-text-right image-subline">Bild 2: Post-Liste mit Inhaltvorschau</div><p><br>Die Codebeispiele findet ihr auf <a href="https://github.com/derKuba/eleventy-examples">Github/derKuba</a>.</p><hr><ul><li>Nächster Artikel: <a href="/content/posts/0421/11nty-bullma-error/">Bulma und Prism.js erzeugen CSS-Fehler in der Darstellung</a></li><li>Vorheriger Artikel: <a href="/content/posts/0421/11nty-tutorial-part-one/">11nty Blog mit eigenem Html-Template Teil 1</a></li></ul></div></div></div></div></section><footer class="footer"><hr><div class="content has-text-centered"><p>der_kuba - 2021 - <a href="/content/impressum.html">Impressum</a> - <a href="/content/datenschutz.html">Datenschutzerklärung</a></p></div></footer></body></html>