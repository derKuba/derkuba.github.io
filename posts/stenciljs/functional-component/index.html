<!doctype html>
<html lang="de">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>StencilJS-Tutorial: Functional Component</title>
        <meta name="description" content="Was ist eine Function Component. Eine alternative zur Klasse">
        <meta property="og:title" content="Speakaoke – Spontane Präsentationen mit KI"/>
        <meta property="og:image" content="/android-chrome-384x384.png"/>
        <meta property="og:url" content="https://derkuba.de/posts/0225/speakaoke/"/>
        <meta property="og:type" content="website"/>
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="der_kuba">
        <link rel="alternate" href="/feed/feed.json" type="application/json" title="der_kuba">
        <link rel="stylesheet" href="/assets/css/prism.css">
        <link rel="stylesheet" href="/assets/css/bulma.css">
        <link rel="stylesheet" href="/assets/css/custom.css">
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const e = Array
                    .prototype
                    .slice
                    .call(document.querySelectorAll(".navbar-burger"), 0);
                e.length > 0 && e.forEach(e => {
                    e.addEventListener("click", () => {
                        const t = e.dataset.target,
                            a = document.getElementById(t);
                        e.classList.toggle("is-active"),
                        a.classList.toggle("is-active")
                    })
                })
                const disableDarkMode = () => {
                    const bodyNode = document.querySelector("body");
                    bodyNode
                        .classList
                        .remove("dark-mode")
                        localStorage
                        .setItem('darkMode', 'disabled');
                }
                const enableDarkMode = () => {
                    const bodyNode = document.querySelector("body");
                    bodyNode
                        .classList
                        .add("dark-mode")
                        localStorage
                        .setItem('darkMode', 'enabled');
                }
                const button = document.getElementById("darkmode");
                button.addEventListener("click", () => {
                    const bodyNode = document.querySelector("body");
                    if (bodyNode.classList.contains("dark-mode")) {
                        disableDarkMode();
                    } else {
                        enableDarkMode();
                    }
                })
                if (localStorage.getItem('darkMode') === 'enabled') {
                    enableDarkMode();
                }
            });
        </script>
    </head>
    <body><header>
    <div class="container">
        <nav class="navbar">
            <div class="navbar-brand">
                <a class="navbar-item navbar-brand__title " href="/">
                    der_kuba
                </a>
                <a class="navbar-item is-size-7-mobile" href="https://github.com/derKuba">
                    @Github
                </a>
                <a class="navbar-item is-size-7-mobile" href="https://twitter.com/der_kuba">
                    @Twitter
                </a>
                <a class="navbar-item is-size-7-mobile" href="https://www.linkedin.com/in/jacob-pawlik-08a40015b/">
                    @LinkedIn
                </a>
                <div class="navbar-burger" data-target="navigation-items">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            <div id="navigation-items" class="navbar-menu">
                <div class="navbar-end">
                    
                        <a class="navbar-item " href="/">
                            Home
                        </a>
                        <a class="navbar-item " href="/posts/">
                            Archiv
                        </a>
                        <a class="navbar-item " href="/about/">
                            About Me
                        </a>
                        <a class="navbar-item " href="/en/">
                            English
                        </a>
                        <a class="navbar-item " href="/content/impressum.html">
                            Impressum
                        </a>
                        <a class="navbar-item " href="/content/datenschutz.html">
                            Datenschutzerklärung
                        </a>
                    <button id="darkmode" alt="dark mode">
                        <svg width="30" height="30">
                            <circle cx="15" cy="15" r="6" fill="currentColor"/>
                            <line id="ray" stroke="currentColor" stroke-width="2" stroke-linecap="round" x1="15" y1="1" x2="15" y2="4"></line>
                            <use href="#ray" transform="rotate(45 15 15)"/>
                            <use href="#ray" transform="rotate(90 15 15)"/>
                            <use href="#ray" transform="rotate(135 15 15)"/>
                            <use href="#ray" transform="rotate(180 15 15)"/>
                            <use href="#ray" transform="rotate(225 15 15)"/>
                            <use href="#ray" transform="rotate(270 15 15)"/>
                            <use href="#ray" transform="rotate(315 15 15)"/>
                        </svg>
                    </button>
                    <!-- special thanks to https://www.freecodecamp.org/news/how-to-handle-dark-mode-with-css-and-javascript/ -->
                </div>
            </div>
        </nav>
    </div>
</header>
        
<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <h1 class="title is-3">StencilJS-Tutorial: Functional Component</h1>
        <div class="post-detail__tags">
          <h3 class="subtitle is-6">
            <time datetime="2021-07-24">
              24 Jul 2021
            </time>
          </h3>
          <div class="tags"><a href="/tags/stenciljs/" class="post-tag">
                <span class="tag is-black">
                  Stenciljs
                </span>
              </a>
          </div>
        </div>
        <div class="content post_detail__content">
          <div class="language-hint">
            
          </div>
          <p>Die <em>functional component</em> oder <em>stateless component</em> stellt eine alternative Schreibweise für die StencilJS-Komponente dar. Die Komponente ist dadurch leichtgewichtiger. Aber man verzichtet auch an etwas Funktionalität. <!-- endOfPreview --> Ich habe aus meinem Adressbuch-Projekt die <em>kuba-input.tsx</em> in eine <em>functional component</em> übertragen:</p>
<pre class="language-tsx"><code class="language-tsx"><span class="highlight-line"><span class="token comment">// kuba-input-functiona.tsx</span></span>
<span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@stencil/core"</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">const</span> KubaInputFunctional <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="highlight-line">    componentId<span class="token punctuation">,</span></span>
<span class="highlight-line">    label<span class="token punctuation">,</span></span>
<span class="highlight-line">    type <span class="token operator">=</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    value<span class="token punctuation">,</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    componentId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="highlight-line">    label<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="highlight-line">    type<span class="token operator">:</span> <span class="token string">"text"</span> <span class="token operator">|</span> <span class="token string">"number"</span><span class="token punctuation">;</span></span>
<span class="highlight-line">    value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">const</span> <span class="token function-variable function">onInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">        event<span class="token punctuation">.</span>document<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span></span>
<span class="highlight-line">            <span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">"inputEvent"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">                detail<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="highlight-line">            <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>kuba-input<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
<span class="highlight-line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">htmlFor</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>componentId<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="highlight-line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span></span>
<span class="highlight-line">                <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>type<span class="token punctuation">}</span></span></span>
<span class="highlight-line">                <span class="token attr-name">id</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>componentId<span class="token punctuation">}</span></span></span>
<span class="highlight-line">                <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span></span>
<span class="highlight-line">                <span class="token attr-name">onInput</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onInput<span class="token punctuation">}</span></span></span>
<span class="highlight-line">            <span class="token punctuation">/></span></span><span class="token plain-text"></span>
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span></code></pre>
<p>Wie man sieht ist es keine Klasse, sondern ein Funktionsaufruf. Die Properties werden als Parameter übergeben. Die Methoden können als const variablen definiert und dann übergeben werden und sie gibt ein TSX-Element zurück.</p>
<p>Die Komponente kann über folgende Zeilen eingebunden werden:</p>
<pre class="language-tsx"><code class="language-tsx"><span class="highlight-line"><span class="token comment">// jede beliebige andere tsx-Datei</span></span>
<span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> KubaInputFunctional <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../kuba-input/kuba-input-functional"</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">KubaInputFunctional</span></span>
<span class="highlight-line">    <span class="token attr-name">componentId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>street<span class="token punctuation">"</span></span></span>
<span class="highlight-line">    <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Straße:<span class="token punctuation">"</span></span></span>
<span class="highlight-line">    <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">"Musterstreet"</span><span class="token punctuation">}</span></span></span>
<span class="highlight-line">    <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">"text"</span><span class="token punctuation">}</span></span></span>
<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">KubaInputFunctional</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span></code></pre>
<p>Der Aufruf erfolgt über den Funktionsnamen und agiert dann wie eine gewöhnliche Komponente.</p>
<p>Ich habe die wesentlichen Unterschiede in eine Tabelle gepackt und werde diese im Anschluss einzeln nochmal erklären:</p>
<table>
<thead>
<tr>
<th>Class Component</th>
<th style="text-align:center">Functional Component</th>
</tr>
</thead>
<tbody>
<tr>
<td>Schwergewichtig</td>
<td style="text-align:center">leichtgewichtig</td>
</tr>
<tr>
<td>lifecycles</td>
<td style="text-align:center">keine lifecycles</td>
</tr>
<tr>
<td>State</td>
<td style="text-align:center">Stateless</td>
</tr>
<tr>
<td>Aufruf über Annotation steuerbar</td>
<td style="text-align:center">Aufruf über Funktionsnamen</td>
</tr>
<tr>
<td>Können schnell Komplex werden</td>
<td style="text-align:center">Sollten einfach gehalten werden, sonst weiter aufspalte</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">leicht zu testen</td>
</tr>
</tbody>
</table>
<h4>Leichtgewichtig</h4>
<p>Es wird keine Klasse und auch keine Annotation benötigt. Daher ist weniger Schreibaufwand nötig. Das Ziel ist sehr kleine Funktionen zu schreiben. Zuviel Code ist ein Indikator dafür, dass die Funktion weiter aufgespalten werden sollte.</p>
<h4>Stateless</h4>
<p>So hat die <em>stateless component</em> keinen eigenen State und muss über die Elternkomponente gesteuert werden. Das wiederum erleichtert die Umsetzung des Container-Pattern.</p>
<p>( Kleiner Exkurs: Das Container-Pattern habe ich bei der React-Entwicklung kennengelernt. Es beschreibt die Trennung innerhalb von Komponenten in Aussehen und Verhalten. Die Elternkomponente besitzt den State, macht die Datentransformation und gibt alle nötigen Props an das Kind weiter. Das Kindelement hat keinen eigenen State und bekommt den Zustand über seine Props mitgeteilt.)</p>
<h4>Keine Lifecyle-Methoden</h4>
<p>Man hat keinen Zugriff auf die <a href="https://stenciljs.com/docs/component-lifecycle">Lifecyle-Methoden</a>. Das sorgt zusätzlich dafür, dass die Komponenten nicht zu komplex werden.</p>
<h3>Fazit</h3>
<p>Ich benutze gerne und häufig diese Art der Komponenten. Sie sind schnell zu schreiben, leicht zu verstehen und auch einfach zu testen (Das Thema testen wird ausgiebig in einem späteren Artikel behandelt). Der Einsatz ist jederzeit zu empfehlen.</p>
<p><br>
Das Codebeispiel findet ihr auf <a href="https://github.com/derKuba/stenciljs-tutorial/blob/main/address-book/src/components/kuba-input/kuba-input-functional.tsx">Github/derKuba</a>.</p>
<p><br>
Ihr habt Fragen oder Anregungen? Schreibt mir bei <a href="https://twitter.com/der_kuba">Twitter</a>.
<br>
<br>
Tausend Dank fürs Lesen!</p>
<p>Kuba</p>

            <hr>
              <ul class="post-navigation">
                  <li>Nächster Artikel:
                    <a href="/posts/stenciljs/address-app/">StencilJS-Tutorial: das Adressbuch</a>
                  </li>
                
                  <li>Vorheriger Artikel:
                    <a href="/posts/stenciljs/stores/">StencilJS-Tutorial: Store</a>
                  </li>
                
              </ul>
          </div>
        </div>
      </div>
    </div>
  </section>
        <!-- Current page: /posts/stenciljs/functional-component/ -->
        <footer class="footer">
    <hr/>
    <div class="content has-text-centered">
        <p>
            der_kuba - 2021-2024 -
            <a href="/content/impressum.html">Impressum</a>
            -
            <a href="/content/datenschutz.html">Datenschutzerklärung</a>
        </p>
    </div>
</footer>
    </body>
</html>